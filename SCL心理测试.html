<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SCL-90 å¿ƒç†å¥åº·å…¨ç»´æµ‹è¯„</title>
    <style>
        :root {
            --primary: #9CB08D;      /* ç‰›æ²¹æœç»¿ */
            --primary-dark: #7A8F6D;
            --accent: #F2EFE5;       /* å¥¶å’–åº•è‰² */
            --bg: #F9F9F9;
            --text: #3D3D3D;
            --text-light: #999999;
            --danger: #E57373;
            --warning: #FFB74D;
            --success: #81C784;
            --radius: 16px;
            --shadow: 0 8px 24px rgba(156, 176, 141, 0.12);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: -apple-system, "PingFang SC", "Helvetica Neue", sans-serif;
            background-color: #F0F2F5;
            margin: 0;
            padding: 0;
            color: var(--text);
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        #app {
            width: 100%;
            max-width: 480px;
            background-color: #FFFFFF;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 30px rgba(0,0,0,0.03);
            display: flex;
            flex-direction: column;
        }

        /* éšè—ç±» */
        .hidden { display: none !important; }
        
        /* åŠ¨ç”» */
        .fade-in { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* æŒ‰é’®é€šç”¨ */
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(156, 176, 141, 0.4);
            transition: transform 0.1s;
        }
        .btn:active { transform: scale(0.98); }
        .btn-outline {
            background: transparent;
            border: 1px solid #DDD;
            color: #666;
            box-shadow: none;
            margin-top: 15px;
        }

        /* é¦–é¡µ */
        .hero {
            padding: 50px 20px 30px;
            text-align: center;
            background: linear-gradient(180deg, #FFF 0%, var(--accent) 100%);
        }
        .avocado-icon { font-size: 60px; margin-bottom: 10px; display: block; }
        .tag-row { display: flex; justify-content: center; gap: 8px; margin: 20px 0; }
        .tag { font-size: 12px; padding: 4px 10px; background: rgba(255,255,255,0.8); border-radius: 12px; color: var(--primary-dark); border: 1px solid var(--primary); }

        .card {
            margin: 15px 20px;
            padding: 20px;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid #FAFAFA;
        }

        /* ç­”é¢˜é¡µ */
        .header-bar {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: white;
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: 0 2px 10px rgba(0,0,0,0.02);
        }
        .progress-track {
            flex: 1;
            height: 8px;
            background: #EEE;
            border-radius: 4px;
            margin: 0 15px;
            overflow: hidden;
        }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }
        
        .question-area {
            flex: 1;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .q-text { font-size: 22px; font-weight: 700; line-height: 1.5; margin-bottom: 10px; text-align: center; }
        .q-desc { text-align: center; color: var(--text-light); font-size: 14px; margin-bottom: 40px; }
        
        .option-item {
            background: white;
            border: 1px solid #EEE;
            padding: 16px 20px;
            margin-bottom: 12px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .option-item:active { background: var(--accent); border-color: var(--primary); }
        .option-circle { width: 20px; height: 20px; border: 2px solid #DDD; border-radius: 50%; }

        /* ç»“æœé¡µ */
        .result-head {
            background: var(--primary);
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 0 0 24px 24px;
        }
        .score-val { font-size: 56px; font-weight: 800; line-height: 1; margin: 10px 0; }
        .result-badge { 
            background: rgba(255,255,255,0.2); 
            padding: 6px 16px; 
            border-radius: 20px; 
            font-size: 14px; 
            display: inline-block; 
        }

        .factor-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-size: 14px;
        }
        .f-name { width: 70px; font-weight: 600; color: #555; }
        .f-bar-bg { flex: 1; height: 10px; background: #EEE; border-radius: 5px; margin: 0 10px; overflow: hidden; }
        .f-bar-fill { height: 100%; border-radius: 5px; }
        .f-score { width: 30px; text-align: right; font-weight: bold; color: #666; }

        /* é¢œè‰²ç±» */
        .bg-green { background-color: var(--success); }
        .bg-orange { background-color: var(--warning); }
        .bg-red { background-color: var(--danger); }
        
        .nav-btns { display: flex; gap: 10px; padding: 0 20px; margin-top: auto; margin-bottom: 20px; }
        .btn-back { width: 40%; background: #EEE; color: #666; }
        
    </style>
</head>
<body>

<div id="app">
    <!-- 1. é¦–é¡µ -->
    <div id="page-home" class="fade-in">
        <div class="hero">
            <div class="avocado-icon">ğŸ¥‘</div>
            <h1>SCL-90<br>å¿ƒç†å¥åº·è‡ªè¯„é‡è¡¨</h1>
            <div class="tag-row">
                <div class="tag">ğŸ¥ åŒ»é™¢åŒæ¬¾</div>
                <div class="tag">ğŸ“‘ 90é“é¢˜</div>
                <div class="tag">â± çº¦10åˆ†é’Ÿ</div>
            </div>
            <p style="color: #666; font-size: 14px; margin-top: 10px;">
                æ·±å…¥åˆ†æ10å¤§å¿ƒç†ç»´åº¦ï¼ŒåŠ©ä½ äº†è§£å½“ä¸‹çš„æƒ…ç»ªçŠ¶æ€ã€‚
            </p>
        </div>
        <div class="card">
            <h3 style="margin-top:0">æµ‹è¯•å‰é¡»çŸ¥</h3>
            <p style="font-size:14px; color:#666; line-height:1.6">
                1. è¯·æ ¹æ®æ‚¨<b>æœ€è¿‘ä¸€å‘¨</b>çš„å®é™…æ„Ÿè§‰è¿›è¡Œå›ç­”ã€‚<br>
                2. ç­”æ¡ˆæ²¡æœ‰å¯¹é”™ä¹‹åˆ†ï¼Œè¯·å‡­å€Ÿç¬¬ä¸€ç›´è§‰é€‰æ‹©ã€‚<br>
                3. æœ¬æµ‹è¯•ä»…ä¾›è‡ªæŸ¥å‚è€ƒï¼Œä¸èƒ½ä½œä¸ºåŒ»å­¦è¯Šæ–­ä¾æ®ã€‚
            </p>
        </div>
        <div style="padding: 20px;">
            <button class="btn" onclick="startTest()">å¼€å§‹æµ‹è¯„</button>
        </div>
    </div>

    <!-- 2. ç­”é¢˜é¡µ -->
    <div id="page-quiz" class="hidden">
        <div class="header-bar">
            <span style="font-size:12px; color:#999" id="progress-text">1/90</span>
            <div class="progress-track">
                <div class="progress-fill" id="progress-bar"></div>
            </div>
            <span style="font-size:18px; cursor:pointer" onclick="alert('åšæŒå°±æ˜¯èƒœåˆ©ï¼è¯·ç»§ç»­ç­”é¢˜')">ğŸ’ª</span>
        </div>

        <div class="question-area" id="q-container">
            <div class="q-text fade-in" id="q-title">é¢˜ç›®åŠ è½½ä¸­...</div>
            <div class="q-desc">æœ€è¿‘ä¸€å‘¨ï¼Œæ‚¨æ˜¯å¦å—åˆ°æ­¤é—®é¢˜çš„å›°æ‰°ï¼Ÿ</div>

            <div class="options-list">
                <!-- é€‰é¡¹1-5åˆ† -->
                <div class="option-item" onclick="nextQ(1)">
                    <span>æ²¡æœ‰</span> <div class="option-circle"></div>
                </div>
                <div class="option-item" onclick="nextQ(2)">
                    <span>å¾ˆè½»</span> <div class="option-circle"></div>
                </div>
                <div class="option-item" onclick="nextQ(3)">
                    <span>ä¸­ç­‰</span> <div class="option-circle"></div>
                </div>
                <div class="option-item" onclick="nextQ(4)">
                    <span>åé‡</span> <div class="option-circle"></div>
                </div>
                <div class="option-item" onclick="nextQ(5)">
                    <span>ä¸¥é‡</span> <div class="option-circle"></div>
                </div>
            </div>
        </div>
        
        <div class="nav-btns">
            <button class="btn btn-back" onclick="prevQ()" id="btn-prev" disabled>ä¸Šä¸€é¢˜</button>
        </div>
    </div>

    <!-- 3. ç»“æœé¡µ -->
    <div id="page-result" class="hidden fade-in">
        <div class="result-head">
            <div>æ‚¨çš„æ€»å‡åˆ†</div>
            <div class="score-val" id="total-score">0.0</div>
            <div class="result-badge" id="result-summary">çŠ¶æ€åˆ†æä¸­...</div>
        </div>

        <div class="card">
            <h3 style="margin-top:0; border-bottom:1px solid #EEE; padding-bottom:10px;">ç»´åº¦è¯¦ç»†åˆ†æ</h3>
            <div id="factor-box" style="margin-top:15px">
                <!-- JS å¡«å…… -->
            </div>
        </div>

        <div class="card" style="background:#F2EFE5; border:none;">
            <h4 style="margin:0 0 5px 0; color:#555">ğŸ’¡ ç»“æœè§£è¯»å‚è€ƒ</h4>
            <p style="font-size:12px; color:#666; line-height:1.5; margin:0">
                <b style="color:var(--success)">ç»¿è‰² ( < 2åˆ† )</b>ï¼šè¯¥ç»´åº¦æš‚æ— æ˜æ˜¾ç—‡çŠ¶ã€‚<br>
                <b style="color:var(--warning)">æ©™è‰² ( 2~3åˆ† )</b>ï¼šå­˜åœ¨è½»åº¦ç—‡çŠ¶ï¼Œå»ºè®®é€‚å½“è‡ªæˆ‘è°ƒèŠ‚ã€‚<br>
                <b style="color:var(--danger)">çº¢è‰² ( > 3åˆ† )</b>ï¼šç—‡çŠ¶è¾ƒæ˜æ˜¾ï¼Œå»ºè®®å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢å¸®åŠ©ã€‚
            </p>
        </div>

        <div style="padding: 20px;">
            <button class="btn" onclick="location.reload()">å†æµ‹ä¸€æ¬¡</button>
            <button class="btn btn-outline" onclick="shareResult()">ä¿å­˜ç»“æœ (æˆªå›¾)</button>
        </div>
    </div>
</div>

<script>
    /**
     * SCL-90 å®Œæ•´é¢˜åº“ (90é¢˜)
     * f: å› å­å½’å± 
     * 1=èº¯ä½“åŒ–, 2=å¼ºè¿«, 3=äººé™…æ•æ„Ÿ, 4=æŠ‘éƒ, 5=ç„¦è™‘, 6=æ•Œå¯¹, 7=ææ€–, 8=åæ‰§, 9=ç²¾ç¥ç—…æ€§, 10=å…¶ä»–
     */
    const questions = [
        {i:1, t:"å¤´ç—›", f:1}, {i:2, t:"ç¥ç»è¿‡æ•ï¼Œå¿ƒä¸­ä¸è¸å®", f:5}, {i:3, t:"å¤´è„‘ä¸­æœ‰ä¸å¿…è¦çš„æƒ³æ³•æˆ–å­—å¥ç›˜æ—‹", f:2},
        {i:4, t:"å¤´æ™•æˆ–æ˜å€’", f:1}, {i:5, t:"å¯¹å¼‚æ€§çš„å…´è¶£å‡é€€", f:4}, {i:6, t:"å¯¹æ—äººè´£å¤‡æ±‚å…¨", f:3},
        {i:7, t:"æ„Ÿåˆ°åˆ«äººèƒ½æ§åˆ¶æ‚¨çš„æ€æƒ³", f:9}, {i:8, t:"è´£æ€ªåˆ«äººåˆ¶é€ éº»çƒ¦", f:6}, {i:9, t:"å¿˜æ€§å¤§", f:2},
        {i:10, t:"æ‹…å¿ƒè‡ªå·±çš„è¡£é¥°æ•´é½åŠä»ªæ€çš„ç«¯æ­£", f:2}, {i:11, t:"å®¹æ˜“çƒ¦æ¼å’Œæ¿€åŠ¨", f:6}, {i:12, t:"èƒ¸ç—›", f:1},
        {i:13, t:"å®³æ€•ç©ºæ—·çš„åœºæ‰€æˆ–è¡—é“", f:7}, {i:14, t:"æ„Ÿåˆ°è‡ªå·±çš„ç²¾åŠ›ä¸‹é™ï¼Œæ´»åŠ¨å‡æ…¢", f:4}, {i:15, t:"æƒ³ç»“æŸè‡ªå·±çš„ç”Ÿå‘½", f:4},
        {i:16, t:"å¬åˆ°æ—äººå¬ä¸åˆ°çš„å£°éŸ³", f:9}, {i:17, t:"å‘æŠ–", f:5}, {i:18, t:"æ„Ÿåˆ°å¤§å¤šæ•°äººéƒ½ä¸å¯ä¿¡", f:8},
        {i:19, t:"èƒƒå£ä¸å¥½ï¼Œåƒä¸ä¸‹ä¸œè¥¿", f:10}, {i:20, t:"å®¹æ˜“å“­æ³£", f:4}, {i:21, t:"åŒå¼‚æ€§ç›¸å¤„æ—¶æ„Ÿåˆ°å®³ç¾ä¸è‡ªåœ¨", f:3},
        {i:22, t:"æ„Ÿåˆ°å—éª—ï¼Œä¸­äº†åœˆå¥—æˆ–æœ‰äººæƒ³æŠ“ä½æ‚¨", f:8}, {i:23, t:"æ— ç¼˜æ— æ•…åœ°çªç„¶æ„Ÿåˆ°å®³æ€•", f:5}, {i:24, t:"è‡ªå·±ä¸èƒ½æ§åˆ¶åœ°å‘è„¾æ°”", f:6},
        {i:25, t:"æ€•å•ç‹¬å‡ºé—¨", f:7}, {i:26, t:"ç»å¸¸è´£æ€ªè‡ªå·±", f:4}, {i:27, t:"è…°ç—›", f:1},
        {i:28, t:"æ„Ÿåˆ°éš¾ä»¥å®Œæˆä»»åŠ¡", f:2}, {i:29, t:"æ„Ÿåˆ°å­¤ç‹¬", f:4}, {i:30, t:"æ„Ÿåˆ°è‹¦é—·", f:4},
        {i:31, t:"è¿‡åˆ†æ‹…å¿§", f:4}, {i:32, t:"å¯¹äº‹ç‰©ä¸æ„Ÿå…´è¶£", f:4}, {i:33, t:"æ„Ÿåˆ°å®³æ€•", f:5},
        {i:34, t:"æ‚¨çš„æ„Ÿæƒ…å®¹æ˜“å—åˆ°ä¼¤å®³", f:3}, {i:35, t:"æ—äººèƒ½çŸ¥é“æ‚¨çš„ç§ä¸‹æƒ³æ³•", f:9}, {i:36, t:"æ„Ÿåˆ°åˆ«äººä¸ç†è§£æ‚¨ã€åŒæƒ…æ‚¨", f:3},
        {i:37, t:"æ„Ÿåˆ°äººä»¬å¯¹æ‚¨ä¸å‹å¥½ï¼Œä¸å–œæ¬¢æ‚¨", f:3}, {i:38, t:"åšäº‹å¿…é¡»åšå¾—å¾ˆæ…¢ä»¥ä¿è¯åšå¾—æ­£ç¡®", f:2}, {i:39, t:"å¿ƒè·³å¾—å¾ˆå‰å®³", f:5},
        {i:40, t:"æ¶å¿ƒæˆ–èƒƒéƒ¨ä¸èˆ’æœ", f:1}, {i:41, t:"æ„Ÿåˆ°æ¯”ä¸ä¸Šåˆ«äºº", f:3}, {i:42, t:"è‚Œè‚‰é…¸ç—›", f:1},
        {i:43, t:"æ„Ÿåˆ°æœ‰äººåœ¨ç›‘è§†æ‚¨ã€è°ˆè®ºæ‚¨", f:8}, {i:44, t:"éš¾ä»¥å…¥ç¡", f:10}, {i:45, t:"åšäº‹å¿…é¡»åå¤æ£€æŸ¥", f:2},
        {i:46, t:"éš¾ä»¥ä½œå‡ºå†³å®š", f:2}, {i:47, t:"æ€•ä¹˜ç”µè½¦ã€å…¬å…±æ±½è½¦ã€åœ°é“æˆ–ç«è½¦", f:7}, {i:48, t:"å‘¼å¸æœ‰å›°éš¾", f:1},
        {i:49, t:"ä¸€é˜µé˜µå‘çƒ­æˆ–å‘å†·", f:1}, {i:50, t:"å› ä¸ºæ„Ÿåˆ°å®³æ€•è€Œé¿å¼€æŸäº›ä¸œè¥¿ã€åœºåˆæˆ–æ´»åŠ¨", f:7}, {i:51, t:"è„‘å­å˜ç©ºäº†", f:2},
        {i:52, t:"èº«ä½“å‘éº»æˆ–åˆºç—›", f:1}, {i:53, t:"å–‰å’™æœ‰æ¢—å¡æ„Ÿ", f:1}, {i:54, t:"æ„Ÿåˆ°æ²¡æœ‰å‰é€”æ²¡æœ‰å¸Œæœ›", f:4},
        {i:55, t:"ä¸èƒ½é›†ä¸­æ³¨æ„åŠ›", f:2}, {i:56, t:"æ„Ÿåˆ°èº«ä½“çš„æŸä¸€éƒ¨åˆ†è½¯å¼±æ— åŠ›", f:1}, {i:57, t:"æ„Ÿåˆ°ç´§å¼ æˆ–å®¹æ˜“ç´§å¼ ", f:5},
        {i:58, t:"æ„Ÿåˆ°æ‰‹æˆ–è„šå‘é‡", f:1}, {i:59, t:"æƒ³åˆ°æ­»äº¡çš„äº‹", f:10}, {i:60, t:"åƒå¾—å¤ªå¤š", f:10},
        {i:61, t:"å½“åˆ«äººçœ‹ç€æ‚¨æˆ–è°ˆè®ºæ‚¨æ—¶æ„Ÿåˆ°ä¸è‡ªåœ¨", f:3}, {i:62, t:"æœ‰ä¸€äº›ä¸å±äºæ‚¨è‡ªå·±çš„æƒ³æ³•", f:9}, {i:63, t:"æœ‰æƒ³æ‰“äººæˆ–ä¼¤å®³ä»–äººçš„å†²åŠ¨", f:6},
        {i:64, t:"é†’å¾—å¤ªæ—©", f:10}, {i:65, t:"å¿…é¡»åå¤æ´—æ‰‹ã€ç‚¹æ•°ç›®æˆ–è§¦æ‘¸æŸäº›ä¸œè¥¿", f:2}, {i:66, t:"ç¡å¾—ä¸ç¨³ä¸æ·±", f:10},
        {i:67, t:"æœ‰æƒ³æ‘”åæˆ–ç ´åä¸œè¥¿çš„å†²åŠ¨", f:6}, {i:68, t:"æœ‰ä¸€äº›åˆ«äººæ²¡æœ‰çš„æƒ³æ³•æˆ–å¿µå¤´", f:8}, {i:69, t:"æ„Ÿåˆ°å¯¹åˆ«äººç¥ç»è¿‡æ•", f:3},
        {i:70, t:"åœ¨å•†åœºæˆ–å…¬å…±åœºæ‰€æ„Ÿåˆ°ä¸è‡ªåœ¨", f:7}, {i:71, t:"æ„Ÿåˆ°ä»»ä½•äº‹æƒ…éƒ½å¾ˆéš¾åš", f:4}, {i:72, t:"ä¸€é˜µé˜µææƒ§æˆ–æƒŠæ", f:5},
        {i:73, t:"æ„Ÿåˆ°åœ¨å…¬å…±åœºåˆåƒä¸œè¥¿å¾ˆä¸èˆ’æœ", f:3}, {i:74, t:"ç»å¸¸ä¸äººäº‰è®º", f:6}, {i:75, t:"å•ç‹¬ä¸€äººæ—¶ç¥ç»å¾ˆç´§å¼ ", f:7},
        {i:76, t:"åˆ«äººå¯¹æ‚¨çš„æˆç»©æ²¡æœ‰ä½œå‡ºæ°å½“çš„è¯„ä»·", f:8}, {i:77, t:"å³ä½¿å’Œåˆ«äººåœ¨ä¸€èµ·ä¹Ÿæ„Ÿåˆ°å­¤å•", f:9}, {i:78, t:"æ„Ÿåˆ°åç«‹ä¸å®‰", f:5},
        {i:79, t:"æ„Ÿåˆ°è‡ªå·±ä¸€æ— æ˜¯å¤„", f:4}, {i:80, t:"æ„Ÿåˆ°ç†Ÿæ‚‰çš„ä¸œè¥¿å˜æˆé™Œç”Ÿæˆ–ä¸è±¡æ˜¯çœŸçš„", f:5}, {i:81, t:"å¤§å«æˆ–æ‘”ä¸œè¥¿", f:6},
        {i:82, t:"å®³æ€•è¦åœ¨å…¬å…±åœºåˆæ˜å€’", f:7}, {i:83, t:"æ„Ÿåˆ°åˆ«äººæƒ³åˆ©ç”¨æ‚¨", f:8}, {i:84, t:"ä¸ºä¸€äº›æœ‰å…³æ€§æ–¹é¢å¿µå¤´å¾ˆè‹¦æ¼", f:9},
        {i:85, t:"æ‚¨è®¤ä¸ºåº”è¯¥å› ä¸ºè‡ªå·±çš„è¿‡é”™è€Œå—åˆ°æƒ©ç½š", f:9}, {i:86, t:"æ„Ÿåˆ°è¦èµ¶å¿«æŠŠäº‹æƒ…åšå®Œ", f:5}, {i:87, t:"æ„Ÿåˆ°è‡ªå·±çš„èº«ä½“æœ‰ä¸¥é‡é—®é¢˜", f:9},
        {i:88, t:"ä»æœªæ„Ÿåˆ°å’Œå…¶ä»–äººå¾ˆäº²è¿‘", f:9}, {i:89, t:"æ„Ÿåˆ°æœ‰ç½ª", f:10}, {i:90, t:"æ„Ÿåˆ°è‡ªå·±çš„è„‘å­æœ‰æ¯›ç—…", f:9}
    ];

    // å› å­åç§°å®šä¹‰
    const factorInfo = {
        1: { name: "èº¯ä½“åŒ–", ids: [1,4,12,27,40,42,48,49,52,53,56,58] },
        2: { name: "å¼ºè¿«ç—‡çŠ¶", ids: [3,9,10,28,38,45,46,51,55,65] },
        3: { name: "äººé™…æ•æ„Ÿ", ids: [6,21,34,36,37,41,61,69,73] },
        4: { name: "æŠ‘éƒ", ids: [5,14,15,20,22,26,29,30,31,32,54,71,79] },
        5: { name: "ç„¦è™‘", ids: [2,17,23,33,39,57,72,78,80,86] },
        6: { name: "æ•Œå¯¹", ids: [11,24,63,67,74,81] },
        7: { name: "ææ€–", ids: [13,25,47,50,70,75,82] },
        8: { name: "åæ‰§", ids: [8,18,43,68,76,83] },
        9: { name: "ç²¾ç¥ç—…æ€§", ids: [7,16,35,62,77,84,85,87,88,90] },
        10: { name: "å…¶ä»–", ids: [19,44,59,60,64,66,89] }
    };

    let currentIdx = 0;
    let answers = new Array(90).fill(0); // å­˜å‚¨ç­”æ¡ˆ

    function startTest() {
        document.getElementById('page-home').classList.add('hidden');
        document.getElementById('page-quiz').classList.remove('hidden');
        renderQ();
    }

    function renderQ() {
        const q = questions[currentIdx];
        const qTitle = document.getElementById('q-title');
        
        // ç®€å•çš„åˆ‡æ¢åŠ¨ç”»
        qTitle.classList.remove('fade-in');
        void qTitle.offsetWidth;
        qTitle.innerText = `${currentIdx + 1}. ${q.t}`;
        qTitle.classList.add('fade-in');

        document.getElementById('progress-text').innerText = `${currentIdx + 1} / 90`;
        document.getElementById('progress-bar').style.width = `${((currentIdx + 1) / 90) * 100}%`;

        // æŒ‰é’®çŠ¶æ€
        document.getElementById('btn-prev').disabled = currentIdx === 0;
    }

    function nextQ(score) {
        answers[currentIdx] = score;
        if (currentIdx < 89) {
            currentIdx++;
            renderQ();
        } else {
            calcResult();
        }
    }

    function prevQ() {
        if (currentIdx > 0) {
            currentIdx--;
            renderQ();
        }
    }

    function calcResult() {
        document.getElementById('page-quiz').classList.add('hidden');
        document.getElementById('page-result').classList.remove('hidden');

        let totalScore = answers.reduce((a, b) => a + b, 0);
        let avgScore = (totalScore / 90).toFixed(2);

        document.getElementById('total-score').innerText = avgScore;

        // æ€»è¯„
        let summaryText = "å¿ƒç†çŠ¶æ€è‰¯å¥½";
        if (avgScore > 2.5) summaryText = "éœ€å¯»æ±‚ä¸“ä¸šå¸®åŠ©";
        else if (avgScore > 2) summaryText = "å­˜åœ¨ä¸€å®šå¿ƒç†å‹åŠ›";
        else if (avgScore > 1.5) summaryText = "å¶æœ‰æƒ…ç»ªæ³¢åŠ¨";
        document.getElementById('result-summary').innerText = summaryText;

        // è®¡ç®—å„å› å­åˆ†
        let html = "";
        for (let f = 1; f <= 10; f++) {
            let fObj = factorInfo[f];
            let sum = 0;
            fObj.ids.forEach(id => {
                sum += answers[id - 1]; // idä»1å¼€å§‹ï¼Œç´¢å¼•ä»0å¼€å§‹
            });
            let fAvg = (sum / fObj.ids.length).toFixed(2);
            
            // é¢œè‰²åˆ¤æ–­
            let colorClass = "bg-green";
            let widthPct = (fAvg / 5) * 100; // æ»¡åˆ†5åˆ†
            if (fAvg >= 3) colorClass = "bg-red";
            else if (fAvg >= 2) colorClass = "bg-orange";

            html += `
                <div class="factor-row">
                    <div class="f-name">${fObj.name}</div>
                    <div class="f-bar-bg">
                        <div class="f-bar-fill ${colorClass}" style="width: ${widthPct}%"></div>
                    </div>
                    <div class="f-score" style="${fAvg>=2 ? 'color:#E57373':''}">${fAvg}</div>
                </div>
            `;
        }
        document.getElementById('factor-box').innerHTML = html;
        
        // æ»šåŠ¨åˆ°é¡¶éƒ¨
        window.scrollTo(0, 0);
    }

    function shareResult() {
        alert("è¯·ä½¿ç”¨æ‰‹æœºè‡ªå¸¦æˆªå›¾åŠŸèƒ½ä¿å­˜ç»“æœé¡µé¢ ğŸ“¸");
    }
</script>

</body>
</html>